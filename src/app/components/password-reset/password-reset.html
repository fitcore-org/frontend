<div id="container">
    <div class="dumbbell-container" #dumbbellLeft>
        <div class="weight-plate"></div>
        <div class="weight-plate"></div>
        <div class="weight-plate"></div>
        <div class="grip-section"></div>
        <div class="weight-plate"></div>
        <div class="weight-plate"></div>
        <div class="weight-plate"></div>
    </div>
    
    <div id="reset-container">
        <h1 id="reset-title">FITCORE</h1>
        
        <!-- Etapa 1: Solicitar Email -->
        @if (currentStep === 'email') {
            <p class="reset-subtitle">Recuperação de Senha</p>
            <p class="reset-description">Digite seu email para receber o código de verificação</p>
            
            <form id="form-reset" autocomplete="off">
                <div class="input-container">
                    <fieldset class="input-fieldset">
                        <legend class="input-legend">Email</legend>
                        <input type="email" class="input" id="Email" #Email required>
                    </fieldset>
                </div>

                @if (errorMessage) {
                    <div class="error-text">{{ errorMessage }}</div>
                }

                @if (successMessage) {
                    <div class="success-text">{{ successMessage }}</div>
                }

                <button (click)="requestReset($event)" type="button" id="reset-button" [class.loading]="isLoading">
                    {{ isLoading ? '' : 'Enviar Código' }}
                </button>
            </form>
        }
        
        <!-- Etapa 2: Verificar Código -->
        @if (currentStep === 'code') {
            <p class="reset-subtitle">Verificação de Código</p>
            <p class="reset-description">Digite o código de 6 dígitos enviado para {{ userEmail }}</p>
            
            <form id="form-reset" autocomplete="off">
                <div class="input-container">
                    <fieldset class="input-fieldset">
                        <legend class="input-legend">Código de Verificação</legend>
                        <input type="text" class="input code-input" id="Code" #Code maxlength="6" 
                               (input)="formatCodeInput($event)" placeholder="000000" required>
                    </fieldset>
                </div>

                @if (errorMessage) {
                    <div class="error-text">{{ errorMessage }}</div>
                }

                @if (successMessage) {
                    <div class="success-text">{{ successMessage }}</div>
                }

                <button (click)="verifyCode($event)" type="button" id="reset-button" [class.loading]="isLoading">
                    {{ isLoading ? '' : 'Verificar Código' }}
                </button>
                
                <button (click)="goBack()" type="button" class="back-button">
                    Voltar
                </button>
            </form>
        }
        
        <!-- Etapa 3: Nova Senha -->
        @if (currentStep === 'newPassword') {
            <p class="reset-subtitle">Nova Senha</p>
            <p class="reset-description">Defina sua nova senha</p>
            
            <form id="form-reset" autocomplete="off">
                <div class="input-container">
                    <fieldset class="input-fieldset">
                        <legend class="input-legend">Nova Senha</legend>
                        <input type="password" class="input" id="NewPassword" #NewPassword required>
                    </fieldset>
                </div>

                <div class="input-container">
                    <fieldset class="input-fieldset">
                        <legend class="input-legend">Confirmar Senha</legend>
                        <input type="password" class="input" id="ConfirmPassword" #ConfirmPassword required>
                    </fieldset>
                </div>

                @if (errorMessage) {
                    <div class="error-text">{{ errorMessage }}</div>
                }

                @if (successMessage) {
                    <div class="success-text">{{ successMessage }}</div>
                }

                <button (click)="resetPassword($event)" type="button" id="reset-button" [class.loading]="isLoading">
                    {{ isLoading ? '' : 'Alterar Senha' }}
                </button>
                
                <button (click)="goBack()" type="button" class="back-button">
                    Voltar
                </button>
            </form>
        }
        
        <div id="login-section">
            <p (click)="goToLogin()" id="login-text">Lembrou da senha? <span id="login-link">fazer login</span></p>
        </div>
    </div>
    
    <div class="dumbbell-container" #dumbbellRight>
        <div class="weight-plate"></div>
        <div class="weight-plate"></div>
        <div class="weight-plate"></div>
        <div class="grip-section"></div>
        <div class="weight-plate"></div>
        <div class="weight-plate"></div>
        <div class="weight-plate"></div>
    </div>
</div>
